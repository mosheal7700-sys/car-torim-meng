<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />

<script>
window.addEventListener('beforeinstallprompt', function(e) {
  e.preventDefault();
  return false;
});
</script>
<link rel="manifest" href="manifest_admin.json">
<title>住转 </title>

<style>
/* 驻住 住住 砖   */
* {
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  background: #f3f4f6;
  margin: 0;
  direction: rtl; /* 砖专   祝 */
}

.card {
  width: 360px;
  padding: 30px; 
  border-radius: 12px; 
  background: #fff;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  text-align: center; 
}

h2 {
  margin: 0 0 20px;
  color: #1f2937;
}

/* 注爪 砖转 拽 */
input {
  width: 100%;
  padding: 12px;
  margin: 10px 0; 
  border: 1px solid #ddd;
  border-radius: 8px;
  outline: none;
  font-size: 16px;
  transition: border-color 0.3s;
}

input:focus {
  border-color: #2563eb;
}

button {
  width: 100%;
  padding: 12px;
  margin-top: 10px;
  border-radius: 8px;
  border: none;
  background: #2563eb;
  color: #fff;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.3s;
}

button:hover {
  background: #1d4ed8;
}

/* 驻转专  驻注 (注专 转) */
button:disabled {
    background: #ccc;
    cursor: not-allowed;
}

#error {
  color: #dc2626;
  margin-top: 12px;
  font-size: 0.9em;
  min-height: 20px; 
}

.small {
  font-size: 0.85em;
  color: #6b7280;
  margin-top: 15px;
}
</style>

<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

<script>
// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyA3UGkULozPWRmUGzFPFml67vK0QssEL5U",
  authDomain: "my-car-app-f2235.firebaseapp.com",
  databaseURL: "https://my-car-app-f2235-default-rtdb.firebaseio.com",
  projectId: "my-car-app-f2235",
  storageBucket: "my-car-app-f2235.firebasestorage.app",
  messagingSenderId: "937970174514",
  appId: "1:937970174514:web:c4c2fe7c706220b07e0a2b"
};

// 专砖转 
const ADMIN_EMAILS = [
"alfa990@gmail.com" 
];

// 转转 驻 
const ADMIN_PANEL_URL = "2x35"; //  砖 砖  砖 拽抓 砖

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

// 拽   专 砖专 转 注专 + 专
// (注砖 转 拽  -DOMContentLoaded )
</script>
</head>
<body>

<div id="termsModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); z-index:9999; justify-content:center; align-items:center;">
    
    <div style="background:white; width:90%; max-width:700px; border-radius:10px; padding:25px; text-align:center; box-shadow: 0 4px 15px rgba(0,0,0,0.5); position:relative;">
        
        <h2 style="margin-top:0; color:#333;">转 砖砖 转 驻专转 </h2>
        
        <div id="termsScrollBox" onscroll="checkScrollPosition()" 
             style="height:200px; overflow-y:auto; background:#f9f9f9; color:#333333; border:1px solid #ddd; padding:15px; margin:20px 0; text-align:right; font-size:0.9em; line-height:1.6; border-radius:6px;">
            
            <p><b>专  注专转 .</b></p>
            <p>住 注专转  注转 专砖 . 砖砖 驻祝 转 :</p>
            <p style="color:red; font-size:0.8em;">(   砖专)</p> 
            
            <ol style="padding-right:20px;">
                <li>砖 注专转  砖转 住转.</li>
                <li> 注专 驻专 砖 (砖 砖转砖 住住) 爪 砖砖.</li>
                <li> 驻注 注专转 专砖转 专转.</li>
                <li>砖 砖专 注 驻专转 拽转 转 拽 转 驻专转.</li>
                <li>砖砖 专注 注专转  住 转 爪注 砖驻.</li>
                <li>注专转 砖专转 转 注  砖专转 Firebase .</li>
                <li> 转 转转拽 注专转 住 注.</li>
                <li>砖 注专转 转专转 爪专 注 .</li>
                <li>砖   注  转拽  砖 驻专爪.</li>
                <li>转 注专转 专砖转 砖 砖  注转  转专 拽转.</li>
            </ol>
            <p><b>住祝 转拽.</b></p>
        </div>

        <div style="margin-bottom:20px; text-align:right;">
            <label id="termsLabel" style="cursor:not-allowed; display:flex; align-items:center; color:#000000;">
                <input type="checkbox" id="acceptTermsCheckbox" disabled style="width:18px; height:18px; margin-left:10px;">
                <span>拽专转, 转 砖专转 转 转</span>
            </label>
        </div>

        <button onclick="acceptTerms()" id="acceptBtn" disabled>
            住 注专转
        </button>

    </div>
</div>
<div class="card">
    <h2>住转 </h2>
    <input id="email" type="email" placeholder=" " dir="ltr" style="direction: ltr; text-align: left;" />
    <input id="password" type="password" placeholder="住住" dir="ltr" style="direction: ltr; text-align: left;" />
    <button onclick="login()">转专</button>
    <div id="error"></div>
    <div class="small">砖转砖 志Email + Password.</div>
</div>

<script>
// --- 拽 转 砖砖 ---

document.addEventListener('DOMContentLoaded', function() {
    // 1. 拽  拽   专 砖专 转
    checkTermsAcceptance();
    
    // 2. 专转 砖转
    const checkbox = document.getElementById('acceptTermsCheckbox');
    const btn = document.getElementById('acceptBtn');
    
    // 3.  转转 住
    if(checkbox && btn) {
        checkbox.addEventListener('change', function() {
            if(this.checked) {
                btn.disabled = false;
                btn.style.background = "#28a745"; // 专拽
                btn.style.cursor = "pointer";
            } else {
                btn.disabled = true;
                btn.style.background = "#ccc"; // 驻专
                btn.style.cursor = "not-allowed";
            }
        });
    }
});

function checkTermsAcceptance() {
    // 砖 驻转   (  转砖 注 砖转砖 专)
    const hasAccepted = localStorage.getItem("termsAccepted_admin_v1"); 
    
    if (!hasAccepted) {
        //   砖专, 爪 转 
        const modal = document.getElementById('termsModal');
        if(modal) modal.style.display = 'flex';
    } else {
        //  专 砖专 注专, 拽   专 专 注专 转
        auth.onAuthStateChanged(user => {
            if (user && ADMIN_EMAILS.includes(user.email)) {
                window.location.href = ADMIN_PANEL_URL;
            }
        });
    }
}

// 驻拽爪转 拽转 
function checkScrollPosition() {
    const box = document.getElementById('termsScrollBox');
    const checkbox = document.getElementById('acceptTermsCheckbox');
    const label = document.getElementById('termsLabel');

    if (box.scrollTop + box.clientHeight >= box.scrollHeight - 5) {
        checkbox.disabled = false;
        label.style.cursor = "pointer";
    }
}

// 驻拽爪转 砖专 转
function acceptTerms() {
    localStorage.setItem("termsAccepted_admin_v1", "true");
    document.getElementById('termsModal').style.display = 'none';
    
    // 专 砖砖专, 拽 砖   专 专 (拽专 砖砖专 专 住砖 拽)
    if (auth.currentUser && ADMIN_EMAILS.includes(auth.currentUser.email)) {
        window.location.href = ADMIN_PANEL_URL;
    }
}

// --- 拽 转专转 ---

function login() {
  const email = document.getElementById('email').value.trim();
  const pass = document.getElementById('password').value;
  const err = document.getElementById('error');
  err.innerText = '';
  
  if (!email || !pass) {
    err.innerText = ' 转  住住.';
    return;
  }
  
  auth.setPersistence(firebase.auth.Auth.Persistence.SESSION)
  .then(() => {
    return auth.signInWithEmailAndPassword(email, pass);
  })
  .then((userCredential) => {
    if (ADMIN_EMAILS.includes(userCredential.user.email)) {
      window.location.href = ADMIN_PANEL_URL;
    } else {
      err.innerText = '  专砖转 .';
      auth.signOut();
    }
  })
  .catch((error) => {
    console.error(error);
    err.innerText = '砖 转专转: ' + error.message;
  });
}

document.getElementById("password").addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    login();
  }
});
</script>

</body>
</html>